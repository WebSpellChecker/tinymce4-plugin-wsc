!function(){var a,b="WebSpellChecker",c={minWidth:514,minHeight:534},d={da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",fi:"fi_FI",fr:"fr_FR",it:"it_IT",nb:"nb_NO",nl:"nl_NL",pt:"pt_PT",sv:"sv_SE"};tinymce.settings.language||(tinymce.settings.language="en"),tinymce.settings.language_load||(tinymce.settings.language_load=!0),tinymce.PluginManager.requireLangPack("wsc"),tinymce.create("tinymce.plugins.wsc",{init:function(d,e){var f=this,g={};g.wscCorePath=window.WSCCorePath,g.lang=d.getParam("wsc_lang",f._getCurrentTinyMCEIntLang(d)),g.ctrl=d.id,g.cmd=d.getParam("wsc_cmd",""),g.intLang=d.getParam("wsc_intLang",f._getCurrentTinyMCEIntLang(d)),g.userDictionaryName=d.getParam("wsc_userDictionaryName",""),g.customDictionaryName=d.getParam("wsc_customDictionaryName",""),a||(a=d.getParam("wsc_schemaIdentifier",18)),g.schemaIdentifier=a,g.width=d.getParam("wsc_width",c.minWidth),g.height=d.getParam("wsc_height",c.minHeight),g.top=d.getParam("wsc_top",0),g.left=d.getParam("wsc_left",0),g.title=d.getParam("wsc_popup_title",b),g.autoClose=d.getParam("wsc_autoClose",""),g.domainName=d.getParam("wsc_domainName",""),g.schemaURI=d.getParam("wsc_schemaURI",""),g.onCancel=d.getParam("wsc_popup_cancel",function(){}),g.onFinish=d.getParam("wsc_popup_finish",function(){}),g.onClose=d.getParam("wsc_popup_close",function(){}),g.wscCoreURL=g.wscCorePath+"wsc&schema="+g.schemaIdentifier;for(var h in g)""===g[h]&&delete g[h];d.addCommand("mceWSC",function(){f._initializeWSC(d,g,e)}),d.addCommand("wscRunInsideModal",function(a,b){f._runInsideModalWindow(d,g,b)}),d.addCommand("wscResizeWSCWindow",function(a,b){f._resizeWSCWindow(d,g,b)});var i=g.wscCorePath+"image&img=btn_wsc_tinymce";d.addButton("wsc",{title:"WSC_button_desc",cmd:"mceWSC",image:i})},_initializeWSC:function(a,b,c){var d=this,e=new tinymce.dom.ScriptLoader;e.loadScripts([b.wscCoreURL],function(){d._openWindow(a,b,c)})},_openWindow:function(a,b){var c=document.getElementById(a.id),d=b.onFinish,e=b.onCancel;a.wscDialogWindow&&a.wscDialogWindow.close(),b._callbacksChanged||(b._callbacksChanged=!0,b.onFinish=function(b){a.setContent(b.value),a.save(),a.wscDialogWindow&&a.wscDialogWindow.close(),"function"==typeof d&&d(b)},b.onCancel=function(){a.wscDialogWindow&&a.wscDialogWindow.close(),"function"==typeof e&&e()}),c.value=a.getContent(),118==b.schemaIdentifier&&""!==c.value?(window.DragHandler&&(window.DragHandler.attach=function(){},window.DragHandler.updateWindowSize=function(){},window.DragHandler.resetElement=function(){},window.DragHandler.initView=function(){}),a.wscDialogWindow=a.windowManager.open({title:b.title,width:b.width,height:b.height,resizable:!0,maximizable:!1,body:[],buttons:[],onpostrender:function(){setTimeout(function(){a.execCommand("wscRunInsideModal",!1,a.wscDialogWindow),a.execCommand("wscResizeWSCWindow",!1,a.wscDialogWindow)},0)}})):window.WSC.doSpell(b)},_runInsideModalWindow:function(a,b,c){window.WSC.doSpell(b),a.plugins.wsc._wscInfo={},a.plugins.wsc._wscInfo.modalWindowWrapper=document.getElementById("webspellchecker-modal-window-wrapper"),a.plugins.wsc._wscInfo.modalWindowHeader=document.getElementById("webspellchecker-modal-header"),a.plugins.wsc._wscInfo.modalWindow=document.getElementById("webspellchecker-modal-window"),a.plugins.wsc._wscInfo.modalWindowIframe=a.plugins.wsc._wscInfo.modalWindow.children[0],a.plugins.wsc._wscInfo.contentArea=document.getElementById(c._id+"-body"),a.plugins.wsc._wscInfo.contentArea.appendChild(a.plugins.wsc._wscInfo.modalWindowWrapper);var d=document.getElementById("webspellchecker-modal-bg"),e=document.getElementById("webspellchecker-wsc_resize"),f=document.getElementById("webspellchecker-closeButton");d&&tinyMCE.DOM.remove(d),e&&tinyMCE.DOM.remove(e),f&&tinyMCE.DOM.remove(f)},_resizeWSCWindow:function(a){var b=(parseInt(tinymce.DOM.getStyle(a.plugins.wsc._wscInfo.contentArea,"width",!0),10)||0)-2,c=(parseInt(tinymce.DOM.getStyle(a.plugins.wsc._wscInfo.contentArea,"height",!0),10)||0)-2,d=a.plugins.wsc._wscInfo.modalWindowHeader.clientHeight+(parseInt(tinymce.DOM.getStyle(a.plugins.wsc._wscInfo.modalWindow,"marginTop",!0),10)||0);a.plugins.wsc._wscInfo.modalWindowWrapper.style.width=b+"px",a.plugins.wsc._wscInfo.modalWindowWrapper.style.height=c+"px",a.plugins.wsc._wscInfo.modalWindow.style.marginLeft="0",a.plugins.wsc._wscInfo.modalWindow.style.width="100%",a.plugins.wsc._wscInfo.modalWindow.style.height=c-d+"px",a.plugins.wsc._wscInfo.modalWindowIframe.style.width="100%",a.plugins.wsc._wscInfo.modalWindowIframe.style.height="100%"},_getCurrentTinyMCEIntLang:function(a){var b=a.settings.language;return b=d[b],b||(b="en_US"),b}}),tinymce.PluginManager.add("wsc",tinymce.plugins.wsc)}();